/* * ATM Example system - file Deposit.java * * copyright (c) 2001 - Russell C. Bjork * */package edu.gordon.atm;import edu.gordon.bank_proxy.Message;import edu.gordon.bank_simulation.AccountInformation;import edu.gordon.bank_simulation.Receipt;import edu.gordon.bank_simulation.Status;import edu.gordon.common.Card;import edu.gordon.common.Money;import edu.gordon.common.exceptions.Cancelled;/** Representation for a deposit transaction */public class Deposit extends Transaction{    /** Constructor     *     *  @param atm the ATM used to communicate with customer     *  @param session the session in which the transaction is being performed     *  @param card the customer's card     *  @param pin the PIN entered by the customer     */    public Deposit(ATM atm, Session session, Card card, int pin)    {        super(atm, session, card, pin);    }    /** Get specifics for the transaction from the customer     *     *  @exception Cancelled if customer cancelled this transaction     */    @Override	public Message getSpecificsFromCustomer() throws Cancelled    {        to = atm.getCustomerConsole().readMenuChoice(            "Account to deposit to",            AccountInformation.ACCOUNT_NAMES);        amount = atm.getCustomerConsole().readAmount("Amount to deposit");        return new Message(Message.INITIATE_DEPOSIT,                           card, pin, serialNumber, -1, to, amount);    }    /** Complete an approved transaction     *     *  @return receipt to be printed for this transaction     *  @exception Cancelled if customer cancelled or transaction timed out     */    @Override	public Receipt completeTransaction() throws Cancelled    {        String[] detailsPortion = new String[2];        atm.getEnvelopeAcceptor().acceptEnvelope();        Status status = atm.getNetworkToBank().sendMessage(            new Message(Message.COMPLETE_DEPOSIT,                        card, pin, serialNumber, -1, to, amount),            balances);        detailsPortion[0] = "DEPOSIT TO: " +                            AccountInformation.ACCOUNT_ABBREVIATIONS[to];        detailsPortion[1] = "AMOUNT: " + amount.toString();        return new Receipt(atm.getBankName(), atm.getID(), atm.getPlace(), this.card, this.serialNumber, this.balances, detailsPortion);    }    /** Account to deposit to     */    private int to;    /** Amount of money to deposit     */    private Money amount;}